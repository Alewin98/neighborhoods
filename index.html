<html>
<head>

    <script src="http://code.jquery.com/jquery-latest.min.js " ></script>
    <title>MaptimeLA | Neighborhoods</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script type="text/javascript">

        var map;

        $(document).ready(function(){

            // Build our map, center it on LA City Hall and set the Zoom to 11
            map = L.map('map').setView([34.0536, -118.2430], 11);

            // see some other map tile options @ http://leaflet-extras.github.io/leaflet-providers/preview/
            // map tiles from Humanitarian Open Street Map Team
            L.tileLayer('http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
            }).addTo(map);

            // Now we want to draw some neighborhoods on the map!
            //
            // We snatched the neighborhood boundaries from the The LA Times
            //
            // First thing is to fetch the neighborhood geojson file which defines
            // the shape and other attributes of the neighborhoods like the
            // neighborhood's name.
            $.getJSON('/la-county-neighborhoods-current.geojson', function(contentsOfGeoJsonFile) {

              // How to color the neighborhood outlines
              var neighborhoodStyle = {
                "color": "dodgerBlue",
                "weight": 1,
                "opacity": 0.6,
                "fillOpacity": 0.1
              };

              // How to color the neighborhood outlines
              // once you click on it
              var highlightStyle = {
                "color": "dodgerBlue",
                "weight": 1,
                "opacity": 0.6,
                "fillOpacity": 0.4
              };

              // Define some behavior for the neighborhood drawn on the map
              //
              // "neighborhoodFeature" is the data from the geoJson file
              // "neighborhoodLayer" is how that data will be presented on our map
              function onEachNeighborhood(neighborhoodFeature, neighborhoodLayer) {
                // Show the neighborhood's name when you click on it
                neighborhoodLayer.bindPopup(neighborhoodFeature.properties.name);

                // Highlight that neighborhood when you click on it
                // using the styles above
                neighborhoodLayer.on('click', function(event) {
                  neighborhoodLayer.setStyle(highlightStyle);
                });

                // Unhighlight the neighborhood once the popup closes
                neighborhoodLayer.on('popupclose', function(event) {
                  neighborhoodLayer.setStyle(neighborhoodStyle);
                });
              }

              // Add the fetched data to our map with the styles and
              // behaviors we defined above.
              L.geoJson(contentsOfGeoJsonFile, {
                "style": neighborhoodStyle,
                onEachFeature: onEachNeighborhood
              }).addTo(map);
            });
        });

    </script>
</head>

<body>
    <div id="map">
      <h1 class="map-header">Neighborhoods of MaptimeLA</h1>
    </div>
</body>

</html>
